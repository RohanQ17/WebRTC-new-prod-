
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1" />
    <title>NekoLive</title>
    <link rel="stylesheet" href= 'styles/room.css' />
    
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@500&family=Russo+One&display=swap" rel="stylesheet">
     <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Honk&display=swap" rel="stylesheet">

</head>
<body>
  <main class="roompage">
    <section id="room-name-wrapper" style="font-size: 2.5rem;  text-align: center">
        <p style=" margin: 0;font-family: 'Russo One', sans-serif;color: #eeeeee;">Room name: <span id="roomname" style="font-size: 3rem; font-family: 'Honk',serif"></span></p>
    </section>

    <section id="video-streams">
        <video class="video-player" id="user-1" autoplay playsinline muted></video>
        <video class="video-player" id="user-2" autoplay playsinline></video>
    </section>

    <!-- Chat Section -->
    <section id="chat-container">
        <div id="chat-messages"></div>
        <div id="chat-input-container">
            <input type="text" id="chat-input" placeholder="Type a message..." maxlength="200">
            <button id="send-message-btn">Send</button>
        </div>
    </section>

    <section id="controls-wrapper">
        <div class="control-group">
            <div class="icon-wrapper" id="mic-wrapper">
                <div id="toggle-mic" class="control-icon" onclick="toggleMicrophone()">
                    <svg class="mic-on" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                        <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
                    </svg>
                    <svg class="mic-off" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                        <path d="M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"/>
                    </svg>
                </div>
                <span class="control-label" id="mic-label">Mic On</span>
            </div>
            <div class="icon-wrapper" id="video-wrapper">
                <div id="video-toggle" class="control-icon" onclick="toggleVideo()">
                    <svg class="video-on" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/>
                    </svg>
                    <svg class="video-off" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                        <path d="M21 6.5l-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"/>
                    </svg>
                </div>
                <span class="control-label" id="video-label">Video On</span>
            </div>
            <div class="icon-wrapper" id="chat-wrapper">
                <div id="chat-toggle" class="control-icon" onclick="toggleChat()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/>
                    </svg>
                </div>
                <span class="control-label">Chat</span>
            </div>
            <div class="icon-wrapper" id="leave-wrapper">
                <div id="leave-btn" class="control-icon" onclick="leaveRoom()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2z"/>
                    </svg>
                </div>
                <span class="control-label">Leave</span>
            </div>
        </div>
    </section>
</main>

<script src="https://download.agora.io/sdk/release/AgoraRTC_N-4.20.2.js"></script>
<script type="module" src="streams.js"></script>
<script type="text/javascript">
    // Display room name from session storage
    document.addEventListener('DOMContentLoaded', function() {
        const roomName = sessionStorage.getItem('room') || 'Unknown';
        document.getElementById('roomname').textContent = roomName;
    });
</script>
</body>
</html>